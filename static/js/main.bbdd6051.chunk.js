(this.webpackJsonpgratitude=this.webpackJsonpgratitude||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n.n(a),r=n(23),i=n.n(r),s=(n(57),n(15)),o=n.n(s),l=n(26),u=n(22),d=(n(59),n(60),n(29)),j=n(30),b=n(27),h=n(50),f=n(49),m=(n(61),n(5)),v=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).textInput=void 0,a.focus=function(){var e=a.textInput.current;if(e){var t=e.value;e.focus(),e.value="",e.value=t}},a.handleKeyDown=function(e){if("Enter"===e.key){var t=a.getTextAreaLineCounter(a.props.entry);a.setState({counter:t+1},(function(){a.props.onEntryChange(a.props.entry+"\n"+a.state.counter+". ")})),e.preventDefault(),e.stopPropagation()}},a.handleChange=function(e){a.props.onEntryChange(e.target.value)},a.textInput=c.a.createRef(),a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleKeyDown=a.handleKeyDown.bind(Object(b.a)(a)),a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.focus()}},{key:"getTextAreaLineCounter",value:function(e){return e.split(/\r?\n/).length}},{key:"render",value:function(){return Object(m.jsx)("textarea",{ref:this.textInput,value:this.props.entry,onKeyDown:this.handleKeyDown,onChange:this.handleChange,spellCheck:"false"})}}]),n}(a.Component),g=n(46),p=n.n(g),O=(n(63),n(17)),x=(n(119),n(65),{firebase:{apiKey:"AIzaSyCttZecFRXSssN4I5TX7257K5OXRlFQVbQ",authDomain:"begindailygratitude.firebaseapp.com",databaseURL:"https://begindailygratitude-default-rtdb.firebaseio.com",projectId:"begindailygratitude",storageBucket:"begindailygratitude.appspot.com",messagingSenderId:"1036161507454",appId:"1:1036161507454:web:1a2019ff80eb671568382f",measurementId:"G-T9HSXJ6V9J"}}),y=O.a.initializeApp(x.firebase),N={google:new O.a.auth.GoogleAuthProvider},w=O.a.auth(),C=y.firestore(),k=function(){function e(){Object(d.a)(this,e)}return Object(j.a)(e,[{key:"getAllGratitudeByUserAndDate",value:function(e,t){return new Promise(function(){var n=Object(l.a)(o.a.mark((function n(a){var c,r,i,s,l;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c="",r=O.a.firestore.Timestamp.fromDate(new Date(e+" 00:00:00")),void 0===t){n.next=8;break}return i=C.collection("users").doc(t),n.next=6,i.collection("entry").where("date_of_entry","==",r).get();case 6:(s=n.sent).empty?a(""):(l=1,s.docs.forEach((function(e){1===l?(c=e.data().text,a(c)):a(""),l++})));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"getAll",value:function(){return C.collection("users").get()}},{key:"create",value:function(e,t){var n,a,c=O.a.firestore.Timestamp.fromDate(new Date(t+" 00:00:00"));a=null===(n=w.currentUser)||void 0===n?void 0:n.uid;var r=C.collection("users");void 0!==a&&r.doc(a).collection("entry").where("date_of_entry","==",c).get().then((function(t){t.empty?r.doc(a).collection("entry").add({date_of_entry:c,text:e}):r.doc(a).collection("entry").doc(t.docs[0].id).update({date_of_entry:c,text:e})}))}},{key:"update",value:function(e,t){return C.collection("users").doc(e).update(t)}},{key:"delete",value:function(e){return C.collection("users").doc(e).delete()}}]),e}();n(67);function A(){var e=Object(a.useState)(new Date),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(""),s=Object(u.a)(i,2),d=s[0],j=s[1],b=Object(a.useState)({isAuthenticated:!1,name:""}),h=Object(u.a)(b,2),f=h[0],g=h[1],O=new k,x=Object(a.useState)(""),y=Object(u.a)(x,2),C=y[0],A=y[1],D=c.a.useState(!1),S=Object(u.a)(D,2),I=S[0],T=S[1];Object(a.useEffect)((function(){w.onAuthStateChanged((function(e){if(e){var t,n,a=null===(t=w.currentUser)||void 0===t?void 0:t.displayName,c=null===(n=w.currentUser)||void 0===n?void 0:n.uid;g({isAuthenticated:!0,name:a}),E(c)}else console.log("No user detected"),g({isAuthenticated:!1,name:""}),F()}))}),[]);var E=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),O.getAllGratitudeByUserAndDate(a,t).then((function(e){A(e||"1. ")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A("1. ");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e,t=null===(e=w.currentUser)||void 0===e?void 0:e.uid;E(t)}),[n]);var P,U=function(e){""!==d&&j(""),function(e){return new Promise((function(t,n){w.signInWithPopup(e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}(e).then((function(e){var t;g({isAuthenticated:!0,name:null===(t=e.user)||void 0===t?void 0:t.displayName})})).catch((function(e){j(e.message)}))};function _(e){return Object(m.jsx)("button",{className:"header-icon",onClick:e.onClick,children:Object(m.jsx)("img",{src:"/login.png",className:"login-logout",alt:"Login"})})}function K(e){return Object(m.jsx)("button",{className:"header-icon",onClick:e.onClick,children:Object(m.jsx)("img",{src:"/exit.png",className:"login-logout",alt:"Logout"})})}P=f.isAuthenticated?Object(m.jsx)(K,{onClick:function(){g({isAuthenticated:!1,name:""})}}):Object(m.jsx)(_,{onClick:function(){U(N.google),g({isAuthenticated:!0,name:""})}});var L=function(){return Object(m.jsx)("div",{className:"alert alert-success",role:"alert",children:"Saved \u2705"})};return Object(m.jsxs)("div",{className:"container-fluid",children:[Object(m.jsxs)("div",{className:"row header-border",children:[Object(m.jsx)("div",{className:"col-md-6 offset-md-3 ",children:Object(m.jsxs)("nav",{className:"navbar navbar-expand-lg ",children:[Object(m.jsx)("div",{className:"navbar-brand",children:Object(m.jsx)("h3",{className:"display-4",children:"Thankful Diary"})}),Object(m.jsx)("div",{className:"justify-content-end div-style",id:"navbarNav",children:Object(m.jsx)("ul",{className:"navbar-nav",children:Object(m.jsx)("li",{className:"nav-item",children:P})})})]})}),Object(m.jsx)("div",{className:"col-md-6 offset-md-3 ",children:Object(m.jsx)("h6",{className:"display-6 center-grid",children:"before you begin your day, list 10 things you're grateful for"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-3"}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"subheader",children:[Object(m.jsxs)("div",{className:"subheader-greet",children:["Welcome ",f.name]}),Object(m.jsx)("div",{className:"subheader-calendar align-right",children:Object(m.jsx)(p.a,{selected:n,wrapperClassName:"datePicker",onChange:function(e){r(e)}})})]})}),Object(m.jsx)("div",{className:"col-md-3"})]}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(m.jsx)(v,{entry:C,onEntryChange:function(e){A(e)}})})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-3"}),Object(m.jsx)("div",{className:"col-md-6 offset-md-2",children:Object(m.jsxs)("div",{className:"subheader",children:[Object(m.jsx)("div",{className:"subheader-greet",children:I?Object(m.jsx)(L,{}):null}),Object(m.jsx)("div",{className:"subheader-calendar button-align-right",children:Object(m.jsx)("button",{type:"button",className:"btn btn-primary btn-lg button-align",onClick:function(){var e=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate();O.create(C,e),T(!0),setTimeout((function(){T(!1)}),1e3)},children:"Save"})})]})}),Object(m.jsx)("div",{className:"col-md-3"})]}),Object(m.jsxs)("div",{className:"footer",children:[Object(m.jsx)("div",{className:"display-6 center-grid",children:Object(m.jsx)("b",{children:"CONTACT US"})}),Object(m.jsx)("div",{className:"display-6 center-grid",children:"maxcloud.co@gmail.com"})]})]})}var D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,123)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(A,{})}),document.getElementById("root")),D()},57:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){},67:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.bbdd6051.chunk.js.map