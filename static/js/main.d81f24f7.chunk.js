(this.webpackJsonpgratitude=this.webpackJsonpgratitude||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var a=n(6),i=n.n(a),r=n(18),c=n.n(r),s=(n(55),n(41)),o=n.n(s),u=n(43),l=n(23),d=(n(57),n(58),n(24)),f=n(25),h=n(21),b=n(48),v=n(47),g=(n(59),n(7)),j=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;if(Object(d.a)(this,n),(a=t.call(this,e)).textInput=void 0,a.focus=function(){var e=a.textInput.current;if(e){var t=e.value;e.focus(),e.value="",e.value=t}},a.props.entry){var r=a.getCounter(a.props.entry)+1;a.state={counter:r,text:a.props.entry}}else a.state={counter:2,text:"1. "};return a.textInput=i.a.createRef(),a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleKeyDown=a.handleKeyDown.bind(Object(h.a)(a)),a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.focus()}},{key:"componentWillReceiveProps",value:function(e){if(e.entry){var t=this.getCounter(e.entry)+1;this.state={counter:t,text:e.entry}}}},{key:"getCounter",value:function(e){var t=e.split(/\r?\n/),n=t[t.length-1].split(".");return console.log(n[0]),+n[0]}},{key:"handleKeyDown",value:function(e){"Enter"===e.key&&(this.setState({counter:this.state.counter+1}),this.setState({text:this.state.text+"\n"+this.state.counter+". "}),e.preventDefault(),e.stopPropagation())}},{key:"handleChange",value:function(e){console.log(e.target.value),this.setState({text:e.target.value})}},{key:"render",value:function(){var e=this.state.text;return Object(g.jsx)("textarea",{ref:this.textInput,value:e,onKeyDown:this.handleKeyDown,onChange:this.handleChange,spellCheck:"false"})}}]),n}(a.Component),p=n(44),m=n.n(p),y=(n(61),n(22)),x=(n(62),n(64),{firebase:{apiKey:"AIzaSyCttZecFRXSssN4I5TX7257K5OXRlFQVbQ",authDomain:"begindailygratitude.firebaseapp.com",databaseURL:"https://begindailygratitude-default-rtdb.firebaseio.com",projectId:"begindailygratitude",storageBucket:"begindailygratitude.appspot.com",messagingSenderId:"1036161507454",appId:"1:1036161507454:web:1a2019ff80eb671568382f",measurementId:"G-T9HSXJ6V9J"}}),O=(y.a.initializeApp(x.firebase),{google:new y.a.auth.GoogleAuthProvider}),k=y.a.auth(),C=y.a.database(),N=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"getAllGratitudeByUserAndDate",value:function(){return new Promise((function(e,t){var n="";C.ref("/users").once("value",(function(t){var a=1;t.forEach((function(t){var i=t.val();1===a&&(n=i.text,e(n)),a++}))}))}))}},{key:"getAll",value:function(){return C.ref("/dailygratitude").get()}},{key:"create",value:function(e){return C.ref("/dailygratitude").push(e)}},{key:"update",value:function(e,t){return C.ref("/dailygratitude").child(e).update(t)}},{key:"delete",value:function(e){return C.ref("/dailygratitude").child(e).remove()}},{key:"deleteAll",value:function(){return C.ref("/dailygratitude").remove()}}]),e}();function w(){var e=Object(a.useState)(new Date),t=Object(l.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(""),c=Object(l.a)(r,2),s=c[0],d=c[1],f=Object(a.useState)({isAuthenticated:!1,name:""}),h=Object(l.a)(f,2),b=h[0],v=h[1],p=new N,y=Object(a.useState)(""),x=Object(l.a)(y,2),C=x[0],w=x[1];Object(a.useEffect)((function(){k.onAuthStateChanged((function(e){if(e){var t,n=null===(t=k.currentUser)||void 0===t?void 0:t.displayName;v({isAuthenticated:!0,name:n})}else console.log("No user detected"),v({isAuthenticated:!1,name:""})})),S()}),[]);var A,S=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getAllGratitudeByUserAndDate();case 2:t=e.sent,w(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){""!==s&&d(""),function(e){return new Promise((function(t,n){k.signInWithPopup(e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}(e).then((function(e){var t;v({isAuthenticated:!0,name:null===(t=e.user)||void 0===t?void 0:t.displayName})})).catch((function(e){d(e.message)}))};function I(e){return Object(g.jsx)("button",{onClick:e.onClick,children:"Login"})}function P(e){return Object(g.jsx)("button",{onClick:e.onClick,children:"Logout"})}return A=b.isAuthenticated?Object(g.jsx)(P,{onClick:function(){v({isAuthenticated:!1,name:""})}}):Object(g.jsx)(I,{onClick:function(){D(O.google),v({isAuthenticated:!0,name:""})}}),Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)("div",{className:"row",children:Object(g.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(g.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(g.jsx)("div",{className:"navbar-brand",children:"Daily Gratitude"}),Object(g.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(g.jsx)("span",{className:"navbar-toggler-icon"})}),Object(g.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarNav",children:Object(g.jsx)("ul",{className:"navbar-nav",children:Object(g.jsx)("li",{className:"nav-item",children:A})})})]})})}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsxs)("div",{className:"col-md-3 offset-md-3 text-left",children:["Welcome ",b.name]}),Object(g.jsx)("div",{className:"col-md-1  text-right",children:Object(g.jsx)(m.a,{selected:n,onChange:function(e){return i(e)}})})]}),Object(g.jsx)("div",{className:"row",children:Object(g.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(g.jsx)(j,{entry:C})})})]})}var A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,122)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))};c.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(w,{})}),document.getElementById("root")),A()},55:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.d81f24f7.chunk.js.map