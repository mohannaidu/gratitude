(this.webpackJsonpgratitude=this.webpackJsonpgratitude||[]).push([[0],{114:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n.n(a),c=n(21),i=n.n(c),s=(n(57),n(43)),o=n.n(s),u=n(45),l=n(25),d=(n(59),n(60),n(27)),h=n(28),v=n(24),b=n(50),f=n(49),j=(n(61),n(7)),g=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).textInput=void 0,a.focus=function(){var e=a.textInput.current;if(e){var t=e.value;e.focus(),e.value="",e.value=t}},a.state={counter:2,text:"1. "},a.textInput=r.a.createRef(),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleKeyDown=a.handleKeyDown.bind(Object(v.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.focus()}},{key:"getTextAreaLineCounter",value:function(e){var t=e.split(/\r?\n/);return+t[t.length-1].split(".")[0]}},{key:"handleKeyDown",value:function(e){if("Enter"===e.key){var t=this.getTextAreaLineCounter(this.state.text);this.setState({counter:t+1}),this.setState({text:this.state.text+"\n"+this.state.counter+". "}),e.preventDefault(),e.stopPropagation()}}},{key:"handleChange",value:function(e){""===e.target.value?this.setState({text:"1. ",counter:2}):this.setState({text:e.target.value})}},{key:"render",value:function(){var e=this.state.text;return Object(j.jsx)("textarea",{ref:this.textInput,value:e,onKeyDown:this.handleKeyDown,onChange:this.handleChange,spellCheck:"false"})}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.entry){for(var n="",a=0;a<e.entry.length;a++)n=n+(a+1)+". "+e.entry[a]+"\r\n";return{text:n}}return e.errors?{errors:e.errors}:null}}]),n}(a.Component),m=n(46),p=n.n(m),x=(n(63),n(16)),O=(n(118),n(65),{firebase:{apiKey:"AIzaSyCttZecFRXSssN4I5TX7257K5OXRlFQVbQ",authDomain:"begindailygratitude.firebaseapp.com",databaseURL:"https://begindailygratitude-default-rtdb.firebaseio.com",projectId:"begindailygratitude",storageBucket:"begindailygratitude.appspot.com",messagingSenderId:"1036161507454",appId:"1:1036161507454:web:1a2019ff80eb671568382f",measurementId:"G-T9HSXJ6V9J"}}),y=x.a.initializeApp(O.firebase),N={google:new x.a.auth.GoogleAuthProvider},k=x.a.auth(),w=y.firestore(),C=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,[{key:"getAllGratitudeByUserAndDate",value:function(e){return new Promise((function(t,n){var a,r,c,i="",s=x.a.firestore.Timestamp.fromDate(new Date(e+" 00:00:00"));c=null===(a=k.currentUser)||void 0===a?void 0:a.uid;var o=null===(r=k.currentUser)||void 0===r?void 0:r.email;console.log(o);var u=w.collection("users");void 0!==c&&u.where(x.a.firestore.FieldPath.documentId(),"==",c),u.where("date_of_entry","==",s).get().then((function(e){var n=1;e.docs.forEach((function(e){1===n&&(i=e.data().text,t(i)),n++}))}))}))}},{key:"getAll",value:function(){return w.collection("users").get()}},{key:"create",value:function(e){return w.collection("users").add(e)}},{key:"update",value:function(e,t){return w.collection("users").doc(e).update(t)}},{key:"delete",value:function(e){return w.collection("users").doc(e).delete()}}]),e}();function A(){var e=Object(a.useState)(new Date),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),s=i[0],d=i[1],h=Object(a.useState)({isAuthenticated:!1,name:""}),v=Object(l.a)(h,2),b=v[0],f=v[1],m=new C,x=Object(a.useState)(""),O=Object(l.a)(x,2),y=O[0],w=O[1];Object(a.useEffect)((function(){k.onAuthStateChanged((function(e){if(e){var t,n=null===(t=k.currentUser)||void 0===t?void 0:t.displayName;f({isAuthenticated:!0,name:n})}else console.log("No user detected"),f({isAuthenticated:!1,name:""})})),D()}),[]);var A,D=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,n=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),e.next=4,m.getAllGratitudeByUserAndDate(n);case 4:a=e.sent,w(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e){""!==s&&d(""),function(e){return new Promise((function(t,n){k.signInWithPopup(e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}(e).then((function(e){var t;f({isAuthenticated:!0,name:null===(t=e.user)||void 0===t?void 0:t.displayName})})).catch((function(e){d(e.message)}))};function I(e){return Object(j.jsx)("button",{onClick:e.onClick,children:"Login"})}function P(e){return Object(j.jsx)("button",{onClick:e.onClick,children:"Logout"})}return A=b.isAuthenticated?Object(j.jsx)(P,{onClick:function(){f({isAuthenticated:!1,name:""})}}):Object(j.jsx)(I,{onClick:function(){S(N.google),f({isAuthenticated:!0,name:""})}}),Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(j.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(j.jsx)("div",{className:"navbar-brand",children:"Thankful Diary"}),Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarNav",children:Object(j.jsx)("ul",{className:"navbar-nav",children:Object(j.jsx)("li",{className:"nav-item",children:A})})})]})})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-md-3 outside"}),Object(j.jsx)("div",{className:"col-md-6",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-md-6",children:["Welcome ",b.name]}),Object(j.jsx)("div",{className:"col-md-6 calendar",children:Object(j.jsx)(p.a,{selected:n,wrapperClassName:"datePicker",onChange:function(e){return r(e)}})})]})}),Object(j.jsx)("div",{className:"col-md-3 outside"})]}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(j.jsx)(g,{entry:y})})})]})}var D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,122)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(A,{})}),document.getElementById("root")),D()},57:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.520da8de.chunk.js.map